<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goose Soft | Key Generator</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { background: #050505; color: #00FF00; font-family: 'Courier New', monospace; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .panel { border: 2px solid #00FF00; padding: 30px; background: #0a0a0a; box-shadow: 0 0 20px #00FF00; text-align: center; width: 350px; border-radius: 10px; }
        h1 { font-size: 22px; margin-bottom: 20px; text-shadow: 0 0 10px #00FF00; letter-spacing: 2px; }
        select, button { width: 100%; padding: 12px; margin: 10px 0; background: black; color: #00FF00; border: 1px solid #00FF00; cursor: pointer; font-family: inherit; font-size: 14px; outline: none; }
        button:hover { background: #00FF00; color: black; font-weight: bold; box-shadow: 0 0 10px #00FF00; }
        #result { margin-top: 20px; padding: 10px; border: 1px dashed #00FFFF; color: #00FFFF; display: none; word-break: break-all; font-weight: bold; }
        .status { font-size: 10px; color: #555; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="panel">
        <h1>⚔ GOOSE KEYGEN ⚔</h1>
        
        <label for="duration">ТЕРМІН ПІДПИСКИ:</label>
        <select id="duration">
            <option value="1h">1 Година</option>
            <option value="1d">1 День</option>
            <option value="30d">30 Днів</option>
            <option value="lifetime">LIFETIME</option>
        </select>

        <button id="genBtn">ЗГЕНЕРУВАТИ КЛЮЧ</button>

        <div id="result"></div>
        <div class="status">Table: license_keys_goose</div>
    </div>

    <script>
        // =========================================================
        // ВСТАВ СВОЇ ДАНІ НИЖЧЕ:
        // =========================================================
        
        const SUPABASE_URL = 'https://dxyiwfugfsclpufioeds.supabase.co'; // <--- ВСТАВ СЮДИ URL
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR4eWl3ZnVnZnNjbHB1ZmlvZWRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzNDE2NjgsImV4cCI6MjA4NjkxNzY2OH0.EYETRqZggLbB8N2zjcOnkydlx9F8QyAB-Zi8oKycMCI'; // <--- ВСТАВ СЮДИ КЛЮЧ
        const ADMIN_PASSWORD = '1234'; // Твій пароль для створення ключів
        
        // =========================================================

        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        document.getElementById('genBtn').addEventListener('click', async () => {
            const pass = prompt("Введіть адмін-пароль:");
            
            if (pass !== ADMIN_PASSWORD) {
                alert("Невірний пароль!");
                return;
            }

            const duration = document.getElementById('duration').value;
            const resultDiv = document.getElementById('result');
            
            const rand = () => Math.random().toString(36).substring(2, 7).toUpperCase();
            const newKey = `GOOSE-${rand()}-${rand()}`;

            try {
                const { data, error } = await supabaseClient
                    .from('license_keys_goose') 
                    .insert([{ 
                        key: newKey, 
                        type: duration, 
                        is_used: false 
                    }]);

                if (error) throw error;

                resultDiv.style.display = 'block';
                resultDiv.innerText = "КЛЮЧ: " + newKey;
                alert("Ключ успішно додано в базу!");

            } catch (err) {
                console.error(err);
                alert("Помилка бази: " + err.message);
            }
        });
    </script>
</body>
</html>
